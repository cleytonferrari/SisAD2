SET TERM #;
CREATE TRIGGER "AFT_DEL_AD" FOR "AD"
ACTIVE AFTER DELETE POSITION 0
AS
DECLARE VARIABLE TUPLAS SMALLINT;
BEGIN
   DELETE FROM ITENSAD
      WHERE
       AD_ID = OLD.AD_ID;


  SELECT COUNT(*)
    FROM
      ITENSFICHA
    WHERE
      ITENSFICHA_ID = OLD.ITENSFICHA_ID
    INTO :TUPLAS;
    IF (:TUPLAS >= 1 ) THEN
    BEGIN
      DELETE FROM ITENSFICHA
      WHERE
       ITENSFICHA_ID = OLD.ITENSFICHA_ID;
    END
END #;
